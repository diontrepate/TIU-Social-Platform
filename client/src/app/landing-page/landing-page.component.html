
<div class="topBar">

    <div class="imageContainer">


        <img src="assets/avatar.png" (click)="menu.toggle($event)" alt="Avatar" class="avatar">
        
    </div>
    <div class="nameLabel">{{user.firstName}}</div>

    </div>

    <p-menu #menu [popup]="true" [model]="menuItems"></p-menu>
   

    
<div class="sidePanel">
        <button style=" margin: auto; top: 30px; width: 70%" pButton type="button" (click)="showDialog();" label="Add Group" class="ui-button-rounded"></button>

        <div *ngFor="let groups of user.groups; let i = index" > 

                <p-card header="" [style]="{width: '70%', height:'120px', marginTop:'20%'}" (click)="this.isHome = false; this.getNewsForGroup(user.groups[i].feed); this.passCurrentGroup(groups)" styleClass="ui-card-shadow">
                    <p-header style="margin: 40%">
                            {{user.groups[i].name}}
        
                    </p-header>

                 <div style="margin: 10%"> {{user.groups[i].name}} </div>

                    <p-footer>
                
                    </p-footer>
                </p-card>
                </div>
</div>

<p-dialog header="Title" [(visible)]="display" [draggable]="false" [modal]="true" [style]="{width: '300px', height: '280px'}" >
    Please insert the name of the group
        <br>
        <div [formGroup]="addGroupForm">
        <input style="width:95%;" formControlName="name" type="text"  placeholder="Name" required pInputText /> 
        <br>
        <br>
        <br>
        <div style="text-align: center">Please insert the News Interest for this group</div>
        <input style="width:95%;" formControlName="newsInterest" type="text"  placeholder="News Interest" required pInputText /> 
        <br>
        <button style="width: 70%; margin-left: 15%; margin-top: 10%" pButton type="button" label="Submit"  class="ui-button-rounded"></button>

    </div>

</p-dialog>

 <!------------------------------------------Section For Feed When User Lands on Home-------------------------------------------------------------------------->

<div *ngIf="isHome">

        <div [formGroup]="postForm" class="addPostContainer">
            <textarea class="addPost" formControlName="post"  placeholder="Type your thoughts here..." pInputTextarea></textarea>
            <button style="margin-left:89% ; width: 10%; bottom: 38%;" pButton type="button" label="Post" (click)="this.submitPost()" class="ui-button-rounded"></button>
        </div>
<div class="carousel">
        <p-carousel headerText="NEWS" [autoplayInterval]="10000" [value]="items">
                <ng-template let-item pTemplate="item">
                    <div class="ui-grid ui-grid-responsive" style="background-color:rgba(253, 222, 222, 0.233)">
        
                        <div class="ui-grid-row">
                            <div class="ui-grid-col-12">
                                <div style="width:50%; margin:auto; height: 100%;"> <a href={{item.link}} target="_blank"> <img class="crop" src="{{item.linkToImage}}" /></a> </div> 
                            </div>
                        </div> 
        
                            <div style="width:95%;text-align: center; height: 70px; position: relative; top: 10%"><a href={{item.link}} target="_blank"> <p style="color:rgb(22, 22, 22)">{{item.title}}</p></a></div>
                       
                    </div>
                </ng-template>
              </p-carousel>
    </div>
 

    <div class="mainBody">
        <div *ngFor="let posts of user.posts; let i = index" > 
            <div class="postFeedWrapper">
            <p-card  [style]="{width: '64%', height:'200px', marginLeft:'12.8%', marginTop:'5%'}" styleClass="ui-card-shadow">
                <p-header>
                    <div class="profilePic"> <img src="assets/avatar.png" alt="Avatar" class="avatar" ></div>
                    <div class="nameAndTime">{{user.firstName}}<br></div>
                    <div class="ellipse"><i class="pi pi-ellipsis-h" style="font-size: 3em"></i>
                    </div>
                    <div class="postBody"> {{posts.description}}</div>
                    <div class="like">  
                            
                        <i class="pi pi-thumbs-up" style="font-size: 2.2em; color: #282828"></i>
                        <p style="margin-left:10px; margin-top:2px; font-size: 20px">1</p>

                    </div>
                   
                 

                </p-header>
            </p-card>
        
       <div class="commentWrapper">

            <div *ngFor="let comments of posts.comments; let i = index">

                    <p-card  [style]="{width: '64.5%', height:'150px', marginLeft:'13.5%', backgroundColor:'#F0F0F0'}" >
                            <p-header>
                          {{comments.description}}
                            </p-header>
                        </p-card>

            </div>
        </div>

            <div [formGroup]="postForm">
                    <div class="textBox"><textarea  autoResize="true" class="addComment" formControlName="comment"  placeholder="Comment" pInputTextarea></textarea>
                    </div>
                    </div>
                    <div class="comment"> <button style="width: 100%; height: 100%" pButton type="button" label="comment" class="ui-button-rounded"></button>
                    </div>
        </div>

          
            
        </div>    
    </div>

</div>

<!------------------------------------------Section For Feed When Group Is Selected-------------------------------------------------------------------------->

<div *ngIf="isGroup">

        <div class="navToLanding">
                <button style=" margin-left:10px; bottom: 10px; width: 90%" pButton type="button" label="Home" (click)="this.isGroup = false; this.isHome = true" class="ui-button-rounded"></button>
                <button style=" margin-left:10px; bottom: 5px; width: 90%" pButton type="button" label="Leave" (click)="this.leaveGroup()" class="ui-button-rounded ui-button-danger"></button>

            </div>

        <div class="addPostContainer" [formGroup]="postForm">
            <textarea class="addPost" formControlName="post" placeholder="Type your thoughts here..." pInputTextarea></textarea>
            <button style="margin-left:89% ; width: 10%; bottom: 38%;" pButton type="button" label="Post" (click)="this.submitPost()" class="ui-button-rounded"></button>
        </div>
    <div class="carousel">
            <p-carousel headerText="NEWS" [autoplayInterval]="10000" [value]="groupItems">
                    <ng-template let-item pTemplate="item">
                        <div class="ui-grid ui-grid-responsive" style="background-color:rgba(253, 222, 222, 0.233)">
            
                            <div class="ui-grid-row">
                                <div class="ui-grid-col-12">
                                    <div style="width:50%; margin:auto; height: 100%;"> <a href={{item.link}} target="_blank"> <img class="crop" src="{{item.linkToImage}}" /></a> </div> 
                                </div>
                            </div> 
            
                                <div style="width:95%;text-align: center; height: 70px; position: relative; top: 10%"><a href={{item.link}} target="_blank"> <p style="color:rgb(22, 22, 22)">{{item.title}}</p></a></div>
                           
                        </div>
                    </ng-template>
                  </p-carousel>
        </div>

        <div class="mainBody">
            <div *ngFor="let posts of groupPassed.posts; let i = index" > 
    
                    <p-card [style]="{width: '63%', height:'200px', marginLeft:'13.5%', marginTop:'5%'}" styleClass="ui-card-shadow">
                            <p-header>
                                <div class="profilePic"> <img src="assets/avatar.png" alt="Avatar" class="avatar" ></div>
                                <div class="nameAndTime">{{user.firstName}}<br></div>
                                <div class="ellipse"><i class="pi pi-ellipsis-h" style="font-size: 3em"></i>
                                </div>
                                <div class="postBody"> {{posts.description}}</div>
                                <div class="like">  
                                        
                                    <i class="pi pi-thumbs-up" style="font-size: 2.2em; color: #282828"></i>
                                    <p style="margin-left:10px; margin-top:2px; font-size: 20px">1</p>
            
                                </div>
                            
                            </p-header>
                         
                       
                        </p-card>
                        <div class="commentWrapper">

                        <div *ngFor="let comments of posts.comments; let i = index">

                                <p-card  [style]="{width: '64.5%', height:'150px', marginLeft:'13.5%', backgroundColor:'#F0F0F0'}" >
                                        <p-header>
                                      {{comments.description}}
                                        </p-header>
                                    </p-card>
            
                        </div>
                    </div>

                        <div [formGroup]="postForm">
                                <div class="textBox"><textarea  autoResize="true" class="addComment" formControlName="comment"  placeholder="Comment" pInputTextarea></textarea>
                                </div>
                                </div>
                                <div class="comment"> <button style="width: 100%; height: 100%" pButton type="button" label="comment" class="ui-button-rounded"></button>
                                </div>
            </div>    
        </div>
</div>
